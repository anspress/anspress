!function(a){a.fn.autogrow=function(b){function c(c){var d,e=a(this),f=e.innerHeight(),g=this.scrollHeight,h=e.data("autogrow-start-height")||0;if(g>f)this.scrollTop=0,b.animate?e.stop().animate({height:g},b.speed):e.innerHeight(g);else if(!c||8==c.which||46==c.which||c.ctrlKey&&88==c.which)if(f>h){d=e.clone().addClass(b.cloneClass).css({position:"absolute",zIndex:-10,height:""}).val(e.val()),e.after(d);do g=d[0].scrollHeight-1,d.innerHeight(g);while(g===d[0].scrollHeight);g++,d.remove(),e.focus(),h>g&&(g=h),f>g&&b.animate?e.stop().animate({height:g},b.speed):e.innerHeight(g)}else e.innerHeight(h)}var d=a(this).css({overflow:"hidden",resize:"none"}),e=d.selector,f={context:a(document),animate:!0,speed:50,fixMinHeight:!0,cloneClass:"autogrowclone",onInitialize:!1};return b=a.isPlainObject(b)?b:{context:b?b:a(document)},b=a.extend({},f,b),d.each(function(d,e){var f,g;e=a(e),e.is(":visible")||parseInt(e.css("height"),10)>0?f=parseInt(e.css("height"),10)||e.innerHeight():(g=e.clone().addClass(b.cloneClass).val(e.val()).css({position:"absolute",visibility:"hidden",display:"block"}),a("body").append(g),f=g.innerHeight(),g.remove()),b.fixMinHeight&&e.data("autogrow-start-height",f),e.css("height",f),b.onInitialize&&e.length&&c.call(e[0])}),b.context.on("keyup paste",e,c),d}}(jQuery),function(a){a(document).ready(function(){if(a(document).click(function(b){b.stopPropagation(),a(b.target).is(".ap-dropdown-toggle")||a(b.target).closest(".open").is(".open")||a(b.target).closest("form").is("form")||a(".ap-dropdown").removeClass("open")}),a("body").delegate(".ap-dropdown-menu a","click",function(b){a(this).closest(".ap-dropdown").removeClass("open")}),a("body").delegate(".ap-dropdown-toggle","click",function(b){b.preventDefault(),a(".ap-dropdown").removeClass("open"),a(this).closest(".ap-dropdown").addClass("open")}),a(".ap-tip").tooltipster({contentAsHTML:!0,animation:"fade",theme:"tooltipster-default ap-tip-style",interactive:!0,functionBefore:function(b,c){var d=ap_default(b.data("tipposition"),"top"),e=ap_default(b.data("tipclass"),"top");a(this).tooltipster("option","position",d),a(this).tooltipster("option","theme","tooltipster-default ap-tip-style "+e),c()}}),a("#ap-conversation-scroll").scrollTop(0),a("textarea.autogrow, textarea#post_content").autogrow({onInitialize:!0}),a(".ap-categories-list li .ap-icon-arrow-down").click(function(b){b.preventDefault(),a(this).parent().next().slideToggle(200)}),a("#ask_question_form #post_content, #answer_form #post_content").length>0&&"undefined"!=typeof a.jStorage&&(a("#post_content").on("blur",function(){a.jStorage.set("post_content",a(this).val())}),a("#post_title").on("blur",function(){a.jStorage.set("post_title",a(this).val())}),a("select#category").on("blur",function(){a.jStorage.set("category",a(this).val())}),a(".anspress").delegate('[data-action="ap-add-tag"]',"click touchstart",function(){a.jStorage.set("tags",a('[data-role="ap-tagsinput"]').tagsinput("items"))}),"undefined"!=typeof a.jStorage.get("post_content")&&a("#post_content").val(a.jStorage.get("post_content")),"undefined"!=typeof a.jStorage.get("post_title")&&a("#post_title").val(a.jStorage.get("post_title")),"undefined"!=typeof a.jStorage.get("category")&&a('select#category option[value="'+a.jStorage.get("category")+'"]').prop("selected",!0),"undefined"!=typeof a.jStorage.get("tags")&&a.jStorage.get("tags")&&a.each(a.jStorage.get("tags"),function(b,c){a('[data-role="ap-tagsinput"]').tagsinput("add",c)})),a(".ap-radio-btn").click(function(){a(this).toggleClass("active")}),a(".bootstrap-tagsinput > input").keyup(function(b){a(this).css(width,"auto")}),a("body").delegate("#ap-question-sorting .ap-dropdown-menu a","click",function(b){b.preventDefault();var c=a(this).data("value");a(this).closest(".ap-dropdown-menu").find('input[type="hidden"]').val(c),a(this).closest("form").submit()}),a("body").delegate("#ap-question-sorting-reset","click",function(b){b.preventDefault(),a("#ap-question-sorting").find('input[type="hidden"]').val(""),a(this).closest("form").submit()}),a("body").delegate("#ap-question-sorting","submit",function(){AnsPress.site.showLoading(this);var b=a(this).serialize().replace(/[^&]+=&/g,"").replace(/&[^&]+=$/g,"");return a.ajax({type:"GET",dataType:"html",data:b,success:function(c){AnsPress.site.hideLoading("#ap-question-sorting");var d=a(c);window.history.replaceState("","","?"+b),a("#anspress").html(d.find("#anspress")),a(document).trigger("apAfterSorting")}}),!1}),a("body").delegate(".ap-notify-item","click",function(b){b.preventDefault(),a(this).hide()}),a('[data-action="ap_chart"]').length>0&&a('[data-action="ap_chart"]').each(function(b,c){var d=a(this).data("type");a(this).peity(d)}),a(".ap-dynamic-avatar").initial({fontSize:14,fontWeight:600}),a(document).ajaxComplete(function(b,c,d){a(".ap-dynamic-avatar").initial({fontSize:14,fontWeight:600})}),a(".ap_collapse_menu").length>0){var b=a(".ap_collapse_menu"),c=b.width(),d=b.find(".ap-dropdown .ap-dropdown-menu"),e=0,f=!1;b.find(".ap-dropdown").hide(),b.find("li").each(function(g,h){e=parseInt(e)+parseInt(a(this).outerWidth()),e+parseInt(a(this).next().outerWidth())>c&&(f=!0),f&&!a(this).is(".ap-user-menu-more")&&(d.append(a(this).clone()),a(this).remove(),b.find(".ap-dropdown").show())})}a(".ap-notification-scroll").scrollbar(),a(".ap-label-form-item").click(function(b){b.preventDefault(),a(this).toggleClass("active");var c=a(this).find('input[type="hidden"]');c.val(""==c.val()?a(this).data("label"):"")})})}(jQuery);