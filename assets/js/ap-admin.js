jQuery((function(){jQuery.fn.apAjaxQueryString=function(){var t=jQuery(this).data("query").split("::"),a={action:"ap_ajax"};a.ap_ajax_action=t[0],a.__nonce=t[1],a.args={};var e=0;return jQuery.each(t,(function(i){0!=i&&1!=i&&(a.args[e]=t[i],e++)})),a},APjs.admin=new APjs.admin,APjs.admin.initialize()})),window.APjs={},APjs.admin=function(){},function(t){APjs.admin.prototype={initialize:function(){this.renameTaxo(),this.editPoints(),this.savePoints(),this.deleteFlag(),this.ajaxBtn()},renameTaxo:function(){jQuery(".ap-rename-taxo").on("click",(function(t){return t.preventDefault(),jQuery.ajax({url:ajaxurl,data:{action:"ap_taxo_rename"},context:this,success:function(t){jQuery(this).closest(".error").remove(),location.reload()}}),!1}))},editPoints:function(){jQuery(".wp-admin").on("click",'[data-action="ap-edit-reputation"]',(function(t){t.preventDefault(),t=jQuery(this).attr("href"),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_edit_reputation",id:t},context:this,dataType:"json",success:function(t){t.status&&(jQuery("#ap-reputation-edit").remove(),jQuery("#anspress-reputation-table").hide(),jQuery("#anspress-reputation-table").after(t.html))}})}))},savePoints:function(){jQuery(".wp-admin").on("submit",'[data-action="ap-save-reputation"]',(function(t){return t.preventDefault(),jQuery(".button-primary",this).attr("disabled","disabled"),jQuery(this).attr("href"),jQuery.ajax({type:"POST",url:ajaxurl,cache:!1,data:jQuery(this).serialize({checkboxesAsBools:!0}),context:this,dataType:"json",success:function(t){t.status&&jQuery(".wrap").empty().html(t.html)}}),!1}))},deleteFlag:function(){jQuery('[data-action="ap-delete-flag"]').on("click",(function(t){t.preventDefault(),jQuery.ajax({type:"POST",url:ajaxurl,data:jQuery(this).attr("href"),context:this,success:function(t){jQuery(this).closest(".flag-item").remove()}})}))},ajaxBtn:function(){t(".ap-ajax-btn").on("click",(function(a){a.preventDefault(),a=t(this).apAjaxQueryString(),t.ajax({url:ajaxurl,data:a,context:this,type:"POST",success:function(a){var e;void 0!==t(this).data("cb")&&(e=t(this).data("cb"),"function"==typeof APjs.admin[e]&&APjs.admin[e](a,this))}})}))},replaceText:function(a,e){t(e).closest("li").find("strong").text(a)}},t(document).ready((function(){t(".question-selection").on("submit",(function(t){t.preventDefault()})),t("#select-question-for-answer").on("keyup",(function(){var t=jQuery(this).val();""!=t.trim()&&jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_ajax",ap_ajax_action:"suggest_similar_questions",value:t,is_admin:!0},success:function(t){var a=jQuery(t).filter("#ap-response").html();void 0!==a&&2<a.length&&(t=JSON.parse(a)),void 0!==t.html&&jQuery("#similar_suggestions").html(t.html)},context:this})})),t('[data-action="ap_media_uplaod"]').on("click",(function(t){t.preventDefault(),$btn=jQuery(this);var a=wp.media({title:jQuery(this).data("title"),multiple:!1}).open().on("select",(function(t){var e=(i=a.state().get("selection").first()).toJSON().url,i=i.toJSON().id;jQuery($btn.data("urlc")).val(e),jQuery($btn.data("idc")).val(i),jQuery($btn.data("urlc")).prev().is("img")?jQuery($btn.data("urlc")).prev().attr("src",e):jQuery($btn.data("urlc")).before('<img id="ap_category_media_preview" data-action="ap_media_value" src="'+e+'" />'),jQuery($btn.data("idc")).after('<a href="#" id="ap-category-upload-remove" data-action="ap_media_remove">'+removeImage+"</a>")}))})),t(document).on("click",'[data-action="ap_media_remove"]',(function(a){a.preventDefault(),t('input[data-action="ap_media_value"]').val(""),t('img[data-action="ap_media_value"]').remove(),t(this).remove()})),t(".checkall").on("click",(function(){t(this).closest(".ap-tools-ck").find('input[type="checkbox"]:not(.checkall)').prop("checked",t(this).prop("checked"))})),t("#"+t("#ap-tools-selectroles").val()).slideDown(),t("#ap-tools-selectroles").on("change",(function(){var a="#"+t(this).val();t(".ap-tools-roleitem").hide(),t(a).fadeIn(300)})),t(document).ajaxSuccess((function(){t(".taxonomy-question_category #addtag .form-invalid").length||(t('input[data-action="ap_media_value"]').val(""),t('img[data-action="ap_media_value"]').remove(),t("a[data-action=ap_media_remove]").remove(),t(".term-image-wrap").find(".wp-picker-clear").trigger("click"))}))}))}(jQuery);
