jQuery(function(){jQuery.fn.apAjaxQueryString=function(){var a=jQuery(this).data("query").split("::"),b={};b.action="ap_ajax",b.ap_ajax_action=a[0],b.__nonce=a[1],b.args={};var c=0;return jQuery.each(a,function(d){0!=d&&1!=d&&(b.args[c]=a[d],c++)}),b},APjs.admin=new APjs.admin,APjs.admin.initialize()}),window.APjs={},APjs.admin=function(){},function(a){APjs.admin.prototype={initialize:function(){this.renameTaxo(),this.editPoints(),this.savePoints(),this.deleteFlag(),this.ajaxBtn()},renameTaxo:function(){jQuery(".ap-rename-taxo").click(function(a){return a.preventDefault(),jQuery.ajax({url:ajaxurl,data:{action:"ap_taxo_rename"},context:this,success:function(a){jQuery(this).closest(".error").remove(),location.reload()}}),!1})},editPoints:function(){jQuery(".wp-admin").on("click",'[data-action="ap-edit-reputation"]',function(a){a.preventDefault();var b=jQuery(this).attr("href");jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_edit_reputation",id:b},context:this,dataType:"json",success:function(a){a.status&&(jQuery("#ap-reputation-edit").remove(),jQuery("#anspress-reputation-table").hide(),jQuery("#anspress-reputation-table").after(a.html))}})})},savePoints:function(){jQuery(".wp-admin").on("submit",'[data-action="ap-save-reputation"]',function(a){a.preventDefault(),jQuery(".button-primary",this).attr("disabled","disabled");jQuery(this).attr("href");return jQuery.ajax({type:"POST",url:ajaxurl,cache:!1,data:jQuery(this).serialize({checkboxesAsBools:!0}),context:this,dataType:"json",success:function(a){a.status&&jQuery(".wrap").empty().html(a.html)}}),!1})},deleteFlag:function(){jQuery('[data-action="ap-delete-flag"]').click(function(a){a.preventDefault(),jQuery.ajax({type:"POST",url:ajaxurl,data:jQuery(this).attr("href"),context:this,success:function(a){jQuery(this).closest(".flag-item").remove()}})})},ajaxBtn:function(){a(".ap-ajax-btn").on("click",function(b){b.preventDefault();var c=a(this).apAjaxQueryString();a.ajax({url:ajaxurl,data:c,context:this,type:"POST",success:function(b){if("undefined"!=typeof a(this).data("cb")){var c=a(this).data("cb");"function"==typeof APjs.admin[c]&&APjs.admin[c](b,this)}}})})},replaceText:function(b,c){a(c).closest("li").find("strong").text(b)}},a(document).ready(function(){a("#select-question-for-answer").on("keyup",function(){""!=jQuery.trim(jQuery(this).val())&&jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_ajax",ap_ajax_action:"suggest_similar_questions",value:jQuery(this).val(),is_admin:!0},success:function(a){var b=jQuery(a).filter("#ap-response").html();"undefined"!=typeof b&&b.length>2&&(a=JSON.parse(b)),console.log(a),"undefined"!=typeof a.html&&jQuery("#similar_suggestions").html(a.html)},context:this})}),a('[data-action="ap_media_uplaod"]').click(function(a){a.preventDefault(),$btn=jQuery(this);var b=wp.media({title:jQuery(this).data("title"),multiple:!1}).open().on("select",function(a){var c=b.state().get("selection").first(),d=c.toJSON().url,e=c.toJSON().id;jQuery($btn.data("urlc")).val(d),jQuery($btn.data("idc")).val(e),jQuery($btn.data("urlc")).prev().is("img")?jQuery($btn.data("urlc")).prev().attr("src",d):jQuery($btn.data("urlc")).before('<img id="ap_category_media_preview" src="'+d+'" />')})}),a('[data-action="ap_media_remove"]').click(function(b){b.preventDefault(),a('input[data-action="ap_media_value"]').val(""),a('img[data-action="ap_media_value"]').remove()}),a(".checkall").click(function(){var b=a(this).closest(".ap-tools-ck").find('input[type="checkbox"]:not(.checkall)');b.prop("checked",a(this).prop("checked"))}),a("#"+a("#ap-tools-selectroles").val()).slideDown(),a("#ap-tools-selectroles").change(function(){var b="#"+a(this).val();a(".ap-tools-roleitem").hide(),a(b).fadeIn(300)})})}(jQuery);
//# sourceMappingURL=ap-admin.min.js.map