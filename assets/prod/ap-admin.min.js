function ap_option_flag_note(){jQuery("body").delegate('[data-action="ap_add_field"]',"click",function(){var a=jQuery(this).data("copy"),b=jQuery(this).data("field"),c=jQuery(b+" > div").length+1,d=jQuery("#"+a+" .ap-repeatbable-field").html();d=d.replace("#",c).replace("#",c).replace("#",c),jQuery(d).appendTo("#"+b)}),jQuery("body").delegate('[data-action="ap_delete_field"]',"click",function(){var a=jQuery(this).data("toggle");jQuery("#"+a).remove()})}function ap_submit_menu(){jQuery(".aplinks #submit-aplinks").click(function(){wpNavMenu.addApLink(wpNavMenu.addMenuItemToBottom)})}function ap_add_link_to_menu(a,b,c){c=c||function(){},ap_add_item_to_menu({"-1":{"menu-item-type":"custom","menu-item-url":a,"menu-item-title":b}},c)}function ap_add_item_to_menu(a,b){var c,d=jQuery("#menu").val(),e=jQuery("#menu-settings-column-nonce").val();b=b||function(){},c={action:"add-menu-item",menu:d,"menu-settings-column-nonce":e,"menu-item":a},jQuery.post(ajaxurl,c,function(a){var c=jQuery("#menu-instructions");a=jQuery.trim(a),jQuery("li.pending").hide().fadeIn("slow"),jQuery(".drag-instructions").show(),!c.hasClass("menu-instructions-inactive")&&c.siblings().length&&c.addClass("menu-instructions-inactive"),b()})}!function(a){a.fn.serialize=function(b){return a.param(this.serializeArray(b))},a.fn.serializeArray=function(b){var c=a.extend({checkboxesAsBools:!1},b||{}),d=/select|textarea/i,e=/text|hidden|password|search/i;return this.map(function(){return this.elements?a.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||c.checkboxesAsBools&&"checkbox"===this.type||d.test(this.nodeName)||e.test(this.type))}).map(function(b,d){var e=a(this).val();return null==e?null:a.isArray(e)?a.map(e,function(a,b){return{name:d.name,value:a}}):{name:d.name,value:c.checkboxesAsBools&&"checkbox"===this.type?this.checked?"1":"0":e}}).get()}}(jQuery),jQuery(function(){APjs.admin=new APjs.admin,APjs.admin.initialize()}),window.APjs={},APjs.admin=function(){},APjs.admin.prototype={initialize:function(){this.saveOptions(),this.renameTaxo(),this.editPoints(),this.savePoints(),this.newPointForm(),this.deletePoint(),this.badges(),this.deleteFlag()},saveOptions:function(){jQuery("#options_form").submit(function(){return jQuery.each(jQuery(this).find("input:checkbox:not(:checked)"),function(a,b){var c=jQuery(this).attr("name");console.log(c);var d="_hidden_"+c;jQuery(this).attr("name",""),jQuery('input[name="'+d+'"]').attr("name",c)}),!0})},renameTaxo:function(){jQuery(".ap-rename-taxo").click(function(a){return a.preventDefault(),jQuery.ajax({url:ajaxurl,data:{action:"ap_taxo_rename"},context:this,success:function(a){jQuery(this).closest(".error").remove(),location.reload()}}),!1})},editPoints:function(){jQuery(".wp-admin").delegate('[data-action="ap-edit-reputation"]',"click",function(a){a.preventDefault();var b=jQuery(this).attr("href");jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_edit_reputation",id:b},context:this,dataType:"json",success:function(a){a.status&&(jQuery("#ap-reputation-edit").remove(),jQuery("#anspress-reputation-table").hide(),jQuery("#anspress-reputation-table").after(a.html))}})})},savePoints:function(){jQuery(".wp-admin").delegate('[data-action="ap-save-reputation"]',"submit",function(a){a.preventDefault(),jQuery(".button-primary",this).attr("disabled","disabled");jQuery(this).attr("href");return jQuery.ajax({type:"POST",url:ajaxurl,cache:!1,data:jQuery(this).serialize({checkboxesAsBools:!0}),context:this,dataType:"json",success:function(a){a.status&&jQuery(".wrap").empty().html(a.html)}}),!1})},newPointForm:function(){jQuery(".wp-admin").delegate('[data-button="ap-new-reputation"]',"click",function(a){return a.preventDefault(),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_new_reputation_form"},context:this,dataType:"json",success:function(a){jQuery("#ap-reputation-edit").remove(),jQuery("#anspress-reputation-table").hide(),jQuery("#anspress-reputation-table").after(a.html)}}),!1})},deletePoint:function(){jQuery(".wp-admin").delegate('[data-button="ap-delete-reputation"]',"click",function(a){a.preventDefault();var b=(jQuery(this).attr("href"),jQuery(this).data("args"));return jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_delete_reputation",args:b},context:this,dataType:"json",success:function(a){jQuery(this).closest("tr").slideUp(200)}}),!1})},badges:function(){jQuery(".wp-admin").delegate('[data-action="ap-edit-badge"]',"click",function(a){a.preventDefault();var b=jQuery(this).attr("href");jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_edit_badges",id:b},context:this,dataType:"json",success:function(a){a.status&&(jQuery("#ap-badge-edit").remove(),jQuery("#anspress-badge-table").hide(),jQuery("#anspress-badge-table").after(a.html))}})}),jQuery(".wp-admin").delegate('[data-action="ap-save-badge"]',"submit",function(a){a.preventDefault(),jQuery(".button-primary",this).attr("disabled","disabled");jQuery(this).attr("href");return jQuery.ajax({type:"POST",url:ajaxurl,data:jQuery(this).serialize({checkboxesAsBools:!0}),context:this,dataType:"json",success:function(a){a.status&&jQuery(".wrap").empty().html(a.html)}}),!1}),jQuery(".wp-admin").delegate('[data-button="ap-new-badge"]',"click",function(a){return a.preventDefault(),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_new_badge_form"},context:this,dataType:"json",success:function(a){jQuery("#ap-badge-edit").remove(),jQuery("#anspress-badge-table").hide(),jQuery("#anspress-badge-table").after(a.html)}}),!1}),jQuery(".wp-admin").delegate('[data-button="ap-delete-badge"]',"click",function(a){a.preventDefault();var b=(jQuery(this).attr("href"),jQuery(this).data("args"));return jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ap_delete_badge",args:b},context:this,dataType:"json",success:function(a){jQuery(this).closest("tr").slideUp(200)}}),!1})},deleteFlag:function(){jQuery('[data-action="ap-delete-flag"]').click(function(a){a.preventDefault(),jQuery.ajax({type:"POST",url:ajaxurl,data:jQuery(this).attr("href"),context:this,success:function(a){jQuery(this).closest(".flag-item").remove()}})})}},"undefined"!=typeof wpNavMenu&&(wpNavMenu.addApLink=function(a){var b=jQuery('.aplinks ul .menu-item-title input[type="radio"]:checked'),c=b.data("url"),d=b.data("title");a=wpNavMenu.addMenuItemToBottom,jQuery(".aplinks .spinner").show(),this.addLinkToMenu(c,d,a,function(){jQuery(".aplinks .spinner").hide()})}),jQuery(document).ready(function(a){a("#select-question-for-answer").on("keyup",function(){""!=a.trim(a(this).val())&&a.ajax({type:"POST",url:ajaxurl,data:{action:"ap_ajax",ap_ajax_action:"suggest_similar_questions",value:a(this).val(),is_admin:!0},success:function(b){"undefined"!=typeof b.html&&a("#similar_suggestions").html(b.html)},dataType:"json",context:this})}),ap_option_flag_note(),ap_submit_menu(),a(".ap-dynamic-avatar").initial({fontSize:14,fontWeight:600}),a(document).ajaxComplete(function(b,c,d){a(".ap-dynamic-avatar").initial({fontSize:14,fontWeight:600})}),a("#ap-category-upload").click(function(b){b.preventDefault();var c=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(b){var d=c.state().get("selection").first();console.log(d);var e=d.toJSON().url,f=d.toJSON().id;a("#ap_category_media_url").val(e),a("#ap_category_media_id").val(f),a("#ap_category_media_url").before('<img id="ap_category_media_preview" src="'+e+'" />')})}),a("#ap-category-upload-remove").click(function(b){b.preventDefault(),a("#ap_category_media_url").val(""),a("#ap_category_media_id").val(""),a("#ap_category_media_preview").remove()}),a(document).ready(function(b){"undefined"!=typeof wpColorPicker&&a("#ap-category-color").wpColorPicker()}),a(".checkall").click(function(){var b=a(this).closest(".ap-tools-ck").find('input[type="checkbox"]:not(.checkall)');b.prop("checked",a(this).prop("checked"))}),a("#"+a("#ap-tools-selectroles").val()).slideDown(),a("#ap-tools-selectroles").change(function(){var b="#"+a(this).val();a(".ap-tools-roleitem").hide(),a(b).fadeIn(300)})});